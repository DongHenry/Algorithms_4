package Ch_1_2_Data_Abstraction;

import java.awt.Color;
import edu.princeton.cs.algs4.*;

public class Practise_1_2_03 {
	static class Rectangle {
		Point2D leftUp, leftDown, rightUp, rightDown;
		Rectangle(Point2D lu, Point2D ld, Point2D rd, Point2D ru) {
			leftUp = lu;
			leftDown = ld;
			rightUp = ru;
			rightDown = rd;
		}
		void drawPoint() {
			leftUp.draw();
			leftDown.draw();
			rightUp.draw();
			rightDown.draw();
		}
		void strokeLine() {
			StdDraw.line(leftUp.x(), leftUp.y(), rightUp.x(), rightUp.y());
			StdDraw.line(leftUp.x(), leftUp.y(), leftDown.x(), leftDown.y());
			StdDraw.line(leftDown.x(), leftDown.y(), rightDown.x(), rightDown.y());
			StdDraw.line(rightDown.x(), rightDown.y(), rightUp.x(), rightUp.y());
		}
	}
	
	public static void interval2DTest(int N, double min, double max) {
		StdDraw.setXscale(min, max);
		StdDraw.setYscale(min, max);
		StdDraw.setPenRadius(Math.abs(min - max) / 1000000.0);

		Rectangle[] rects = new Rectangle[N];
		Interval2D[] intervals = new Interval2D[N];
		for(int i = 0; i < N; i++) {
			double xlo = StdRandom.uniform(min, max);
			double xhi = StdRandom.uniform(min, max);
			if (xlo > xhi) {
				double tmp = xlo;
				xlo = xhi;
				xhi = tmp;
			}
			Interval1D x = new Interval1D(xlo, xhi);
			double ylo = StdRandom.uniform(min, max);
			double yhi = StdRandom.uniform(min, max);
			if (ylo > yhi) {
				double tmp = ylo;
				ylo = yhi;
				yhi = tmp;
			}
			Interval1D y = new Interval1D(ylo, yhi);
			Interval2D box = new Interval2D(x, y);
			StdDraw.setPenColor(Color.black);
			StdDraw.setPenRadius(Math.abs(min - max) / 1000000.0);
			box.draw();
			intervals[i] = box;
			rects[i] = new Rectangle(new Point2D(xlo, yhi), 
									 new Point2D(xlo, ylo),
									 new Point2D(xhi, ylo),
									 new Point2D(xhi, yhi));
		}
		
		for(int i = 0; i < N; i++)
			for(int j = 0; j < N; j++)
				if (i != j) {
					
					// 是否相交
					if (intervals[i].intersects(intervals[j])) {
						StdOut.println(intervals[i] + " 与 " + intervals[j] + "相交");
						Rectangle r1 = rects[i];
						Rectangle r2 = rects[j];
						StdDraw.setPenColor(Color.red);
						StdDraw.setPenRadius(0.001);
						r1.strokeLine(); r2.strokeLine();
					}
					
					// 是否包含
					Rectangle r1 = rects[i];
					Rectangle r2 = rects[j];
					if (contains(r1, r2)) {
						StdOut.println(intervals[i] + " 包含 " + intervals[j]);
						StdDraw.setPenColor(Color.blue);
						StdDraw.setPenRadius(0.01);
						 r2.drawPoint();
						 StdDraw.setPenRadius(0.1);
						 r1.drawPoint();
					} else if (contains(r2, r1)) {
						StdDraw.setPenColor(Color.blue);
						StdDraw.setPenRadius(0.01);
						r1.drawPoint();
						StdDraw.setPenRadius(0.1);
						 r2.drawPoint();
						StdOut.println(intervals[j] + " 包含 " + intervals[i]);
					}
				}
	}
	
	/*
	 * 判断包含关系
	 */
	public static boolean contains(Rectangle r1, Rectangle r2) {
		if (r1.leftUp.x() < r2.leftUp.x() &&
			r1.leftUp.y() > r2.leftUp.y() &&
			r1.rightDown.x() > r2.rightDown.x() && 
			r1.rightDown.y() < r2.rightDown.y()) return true;
		return false;
	}

	public static void main(String[] args) {
		interval2DTest(12, 1.0, 100.0);
	}
	// output : execute to see graphic drawing
	/*
	 *  [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 包含 [61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604]
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 与 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 包含 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]
		[22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243] 与 [9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795]相交
		[22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
		[22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243] 与 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]相交
		[9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795] 与 [22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243]相交
		[9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
		[61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 包含 [61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604]
		[61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604] 与 [71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062]相交
		[61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062] 与 [61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604]相交
		[71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[14.600077327791142, 47.38091904270099] x [48.36734916594251, 57.60025767236345] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[14.600077327791142, 47.38091904270099] x [48.36734916594251, 57.60025767236345] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [61.470298143550686, 83.39702191076746] x [13.682120912958188, 26.037293887836604]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [71.20675056831702, 89.45207520925268] x [7.370832313594431, 31.38188080570062]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [14.600077327791142, 47.38091904270099] x [48.36734916594251, 57.60025767236345]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
		[36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486] 与 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [9.078548946176358, 54.29547143724987] x [11.541380434207051, 21.168160561687795]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [14.600077327791142, 47.38091904270099] x [48.36734916594251, 57.60025767236345]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051] 与 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]相交
		[28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478] 与 [25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222]相交
		[25.42452740723099, 93.79418115637617] x [7.376660312596064, 47.45108517183222] 包含 [28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478]
		[28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478] 与 [22.94952209010344, 50.37835576953356] x [2.925328921173444, 30.707439872017243]相交
		[28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478] 与 [36.71579320208708, 82.23898808291294] x [13.60385801436491, 70.45637267456486]相交
		[28.068505152932733, 69.98081294772726] x [27.8633481478478, 47.29680476369478] 与 [21.02712388873065, 47.98530387260372] x [7.825010928113203, 53.89445237963051]相交
	 */
}
